<!-- BEGIN CONTENT -->
<div class="page-content-wrapper">
  <div class="page-content">
    <!-- BEGIN PAGE HEADER-->
    <div class="row">
      <div class="col-md-12">
        <!-- BEGIN PAGE TITLE & BREADCRUMB-->
        <h3 class="page-title">
          KPI
        </h3>
        <ul class="page-breadcrumb breadcrumb">
          <li>
            <i class="fa fa-home"></i>
            <a href="/admin">Home</a>
            <i class="fa fa-angle-right"></i>
          </li>
          <li>
            <a href="#">Dashboard</a>
          </li>
          <li class="pull-right">
            <div id="dashboard-report-range" class="dashboard-date-range tooltips" data-placement="top" data-original-title="Change dashboard date range">
              <i class="icon-calendar"></i>
              <span></span>
              <i class="fa fa-angle-down"></i>
            </div>
          </li>
        </ul>
        <!-- END PAGE TITLE & BREADCRUMB-->
      </div>
    </div>
    <!-- END PAGE HEADER-->
    <!-- BEGIN DASHBOARD STATS -->
    <table class="table table-striped table-bordered table-hover">
      <thead>
        <tr role="row" class="heading">
          <th>&nbsp;</th>
          <% 11.downto(0) do |i| %>
          <th>
            <%= i.months.ago.strftime("%B %Y") %>
          </th>
          <% end %>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            New Cameras
          </td>
          <% 11.downto(0) do |i| %>
          <td>
            <%= DashCamera.where(created_at: i.months.ago.beginning_of_month..i.months.ago.end_of_month).count %>
          </td>
          <% end %>
        </tr>
        <tr>
          <td>
            Total Cameras
          </td>
          <% 11.downto(0) do |i| %>
          <td>
            <%= DashCamera.where(created_at: DashCamera.select(:created_at).order(:created_at).first.created_at..i.months.ago.end_of_month).count %>
          </td>
          <% end %>
        </tr>
        <tr>
          <td>
            New Users
          </td>
          <% 11.downto(0) do |i| %>
          <td>
            <%= DashUser.where(created_at: i.months.ago.beginning_of_month..i.months.ago.end_of_month).count %>
          </td>
          <% end %>
        </tr>
        <tr>
          <td>
            Total Users
          </td>
          <% 11.downto(0) do |i| %>
          <td>
            <%= DashUser.where(created_at: DashUser.select(:created_at).order(:created_at).first.created_at..i.months.ago.end_of_month).count %>
          </td>
          <% end %>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- END DASHBOARD STATS -->
  <div class="row "></div>
</div>
</div>
<!-- END CONTENT -->

