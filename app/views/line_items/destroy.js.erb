$(".cart").html("<%= escape_javascript(render :partial => 'subscriptions/cart') %>");
$(".cart-count").text($("#cart-total").val());
var cart_count = parseInt($("#cart-total").val());
if (cart_count > 0) {
  $(".cart-count").css("opacity", 10);
} else {
  $(".cart-count").css("opacity", 0);
}
Notification.show("<%= flash.now[:message] %>");
<% if params[:type].eql?("add-on") %>
  var qty = parseInt($("#add-<%= params["id"] %>-qty").val());
  $("#add-<%= params["id"] %>-qty").val(qty-1);
<% elsif params[:type].eql?("plan") %>
  $(".add-on-text").val("0");
<% elsif params[:product].present? %>
  var qty = parseInt($("#add-<%= params[:product] %>-qty").val());
  $("#add-<%= params[:product] %>-qty").val(qty-1);
<% end %>

(function() {
  [].slice.call( document.querySelectorAll( '.checkout' ) ).forEach( function( el ) {
    var openCtrl = el.querySelector( '.checkout__button' ),
        closeCtrls = el.querySelectorAll( '.checkout__cancel' );

    openCtrl.addEventListener( 'click', function(ev) {
      ev.preventDefault();
      classie.add( el, 'checkout--active' );
    } );

    [].slice.call( closeCtrls ).forEach( function( ctrl ) {
      ctrl.addEventListener( 'click', function() {
        classie.remove( el, 'checkout--active' );
      } );
    } );
  } );
})();