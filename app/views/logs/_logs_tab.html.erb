<div class="row">
  <div class="col-lg-12 info-panel">
    <h4>Logs</h4>
    <select id="types" multiple class="form-control">
      <% @types.each do |t| %>
      <option value="<%= t %>" <% if params[:types] and params[:types].include?(t) %> selected="selected"<% end %>><%= t.capitalize %></option>
      <% end %>
    </select>
    <input id="current-page" type="hidden" value="<%= @page + 1 %>">
    <input id="exid" type="hidden" value="<%= @camera['id'] %>">
    <button id="apply-types" class="btn">Apply</button>

    <table>
      <thead>
        <th>Date</th>
        <th>Action</th>
        <th>User/Client</th>
      </thead>
      <tbody>
        <% @logs.each do |l| %>
        <tr>
          <td><%= Time.at(l['done_at']).to_datetime %></td>
          <td><%= l['action'] %></td>
          <td><%= l['who'] %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<ul class="pagination">
  <% 1.upto(@pages + 1) do |i| %>
    <% if (@page + 1) == i %>
    <li class="active"><a href="/cameras/<%= @camera['id'] %>?page=<%= i %>&types=<%= params[:types] %>#logs"><%= i %><span class="sr-only">(current)</span></a></li>
    <% else %>
    <li><a href="/cameras/<%= @camera['id'] %>?page=<%= i %>&types=<%= params[:types] %>#logs"><%= i %></a></li>
    <% end %>
  <% end %>
</ul>

<script type="text/javascript">
  $(window.Evercam.Logs.initializeTab);
</script>