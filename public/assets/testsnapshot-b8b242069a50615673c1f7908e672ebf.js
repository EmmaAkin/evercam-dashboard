(function(){var t,e;e=function(t){var e,a;return a=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,e=/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/,a.test(t)||e.test(t)},t=function(t){return Notification.show(t),!0},$(function(){return $("#camera-url-web").on("input",function(){var t,e;return e=$(this).val(),t=document.createElement("a"),t.href=e,$(this).val(t.hostname),$("#port-web").val(t.port),$("#snapshot-web").val(t.pathname)}),$("#test").click(function(a){var r,n,s,o,i,l,c,u,v;return s=/^\d+$/,u=$("#port").val(),n=$("#camera-url").val(),r=$("#snapshot"),i=r.val(),0===i.indexOf("/")&&(r.val(i.substring(1)),i=r.val()),i=i.replace(/\?/g,"X_QQ_X").replace(/&/g,"X_AA_X"),a.preventDefault(),""!==u&&(!s.test(u)||u>65535)?void t("Port value is incorrect"):(""!==u&&(u=":"+u),""!==n&&e(n)?0===n.indexOf("192.168")||0===n.indexOf("127.0.0")||0===n.indexOf("10.")?void t("This is the Internal IP. Please use the External IP."):(c=["external_url=http://"+n+u,"jpg_url=/"+i,"cam_username="+$("#camera-username").val(),"cam_password="+$("#camera-password").val()],l=Ladda.create(this),l.start(),v=0,o=setInterval(function(){return v=Math.min(v+.025,1),l.setProgress(v),1===v?(l.stop(),clearInterval(o)):void 0},200),$.getJSON(EVERCAMP_API+"cameras/test.json?"+c.join("&")).done(function(e){return console.log("success"),0===e.data.indexOf("data:text/html")?t("We got a response, but it's not an image"):(t("We got a snapshot"),$("#testimg").attr("src",e.data))}).fail(function(t){return $("#test-error").text(t.responseJSON.message),console.log("error")}).always(function(){return l.stop(),clearInterval(o)})):void t("External IP Address (or URL) is incorrect"))})})}).call(this);